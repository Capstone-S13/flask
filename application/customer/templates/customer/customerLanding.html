<!doctype html>
<html lang="en">
  <head>
    <title>Customer Landing</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="static/bootstrap.min.css" rel="stylesheet" media="screen">

  </head>
  <body>
    {% include "base.html" %}
    {% block content %}
    <div class="container-nav">
        <nav class="navbar sticky-top navbar-expand-lg navbar-light bg-yellow">
            <div class="fixed-width">
                <a class="nav-icon orange col" href="{{url_for('customer.landing')}}">Customer</a>
                <span class="orange col">View your orders</span>
            </div>
          
          <div class="dropdown show">
            <a class="btn navbar-toggler-icon orange" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              
            </a>
          
            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuLink">
              <a class="dropdown-item" href="{{url_for('customer.settings')}}">Settings</a>
              <a class="dropdown-item" href="{{url_for('auth.logout')}}">Logout</a>
            </div>
          </div>
          
          
        </nav>
        <nav class="tabpanel nav nav-fill bg-yellow justify-content-around">
            <a class="nav-link orange active" aria-current="page" href="#shops" role="tab" data-toggle="tab">Shops</a>
            <a class="nav-link orange" href="#delivery" role="tab" data-toggle="tab">Delivery</a>
        </nav>

        <div class="tab-content">
          <div role="tabpanel" class="tab-pane fade in active" id="shops">
            <div class="container p-3">
                
                <div class="row">
                  {% for store in stores %}
                    <div class="col-sm-6 mb-3">
                      <div class="card">
                        <img src="https://static.wikia.nocookie.net/logopedia/images/c/c0/GrabFood_%282016%29.svg/revision/latest?cb=20210219083903" class="card-img-top" alt="...">
                        <div class="card-body">
                          <h5 class="card-title text-color text-center">{{store.name}}</h5>
                          <a href="/customer/create/{{store.id}}" class="btn btn-yellow btn-block">Buy here</a>
                        </div>
                      </div>
                    </div>
                  {% endfor %}
                </div>
              </div>
          </div>
          
          <div role="tabpanel" class="tab-pane fade" id="delivery">
            <div class="container p-3">
              <div class="row">
                {% for order in delivery %}
                <div class="col-sm-6 mb-3">
                  <div class="card">
                  <div class="card-body">
                      <h5 class="card-title text-color">Order From: {{storeNames[order.storeId]}}</h5>
                      <p class="card-text text-color">Date and time: {{order.dateCreated.strftime('%Y-%m-%d, at %H:%M')}}</p>
                      {% if order.status == "Delivering to Doorstep" %}
                        <form action="/customer/order/waypoint/{{order.orderId}}" method="post">
                          <select class="form-select" aria-label="Default select example">
                            <option selected>Select a Waypoint</option>
                            {% for waypoint in waypoints[order.orderId] %}
                            <option value="{{ waypoint }}">{{ waypoint }}</option>
                            {% endfor %}
                          </select>
                          <button name="waypoint_button" type="submit" class="m-1 btn col btn-outline-red">Confirm Waypoint</button>
                        </form>
                      {% endif %}
                      <p class="card-text text-color">Status: {{order.status}}</p>
                      <form action="/customer/order/{{order.orderId}}" method="post">
                        <button name="order_button" value="Delivered" class="m-1 btn col btn-outline-green">Order Received</button>
                      </form>
                      <!-- <span class="card-text text-color">instructions here</span> -->
                      
                  </div>
                </div>
                </div>
                
                {% endfor %}
              </div>
            </div>
          </div>

        
        </div>
      </div>
      {% if error %}
        <p class="error"><strong>Error:</strong> {{ error }}
      {% endif %}
    {% endblock content %}
  </body>
</html>